<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>AR-визитка на NFT-маркере</title>
  <style>
    /* Стиль для полноэкранного отображения без отступов */
    body, html { margin: 0; width: 100%; height: 100%; overflow: hidden; background: #000; }
    /* При желании можно добавить стили загрузочного экрана или подсказок */
  </style>
  <!-- Подключение A-Frame и AR.js (NFT build) через CDN -->
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/3.4.7/aframe/build/aframe-ar-nft.js"></script>
</head>
<body>
  <!-- A-Frame сцена с подключением AR.js -->
  <a-scene embedded 
           cursor="rayOrigin: mouse; fuse: false" 
           vr-mode-ui="enabled: false" 
           arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;">
    <!-- Загрузка изображения логотипа в ассеты (для использования на визитке) -->
    <a-assets>
      <!-- Замените "logo.png" на путь к файлу изображения вашего логотипа -->
      <img id="logo-img" src="logo.jpg" crossorigin="anonymous" />
    </a-assets>

    <!-- Якорь NFT-маркера: 'myMarker' без расширения соответствует файлам myMarker.fset/.iset/.fset3 -->
    <a-nft type="nft" url="./logo" smooth="true" smoothCount="10" smoothTolerance="0.01" smoothThreshold="5" emitevents="true">
      <!-- Контейнер визитки (плоскость-карточка). Изначально невидима и масштаб 0 для анимации появления -->
      <a-entity id="business-card" visible="false" scale="0 0 0">
        <!-- Фон визитки: полупрозрачный тёмный прямоугольник -->
        <a-plane color="#111111" opacity="0.8" width="1.5" height="1" position="0 0 0" material="shader: flat;"></a-plane>
        <!-- Логотип на визитке (пример: изображение логотипа компании) -->
        <a-image src="#logo-img" width="0.4" height="0.4" position="-0.5 0.2 0.01"></a-image>
        <!-- Имя и должность (пример) -->
        <a-text value="Иван Иванов" position="0 0.25 0.02" color="#00FFFF" align="center" width="2"></a-text>
        <!-- Пример ссылки 1 (например, LinkedIn) -->
        <a-text id="link1" value="LinkedIn" position="-0.4 -0.1 0.02" color="#00FFAA" width="1.5"></a-text>
        <!-- Пример ссылки 2 (например, Twitter) -->
        <a-text id="link2" value="Twitter" position="0.1 -0.1 0.02" color="#00FFAA" width="1.5"></a-text>
      </a-entity>

      <!-- Анимация появления визитки при обнаружении маркера -->
      <a-animation begin="markerFound" attribute="scale" dur="500" fill="forwards"
                  from="0 0 0" to="1 1 1" easing="ease-out" target="#business-card"></a-animation>
      <a-animation begin="markerFound" attribute="visible" dur="1" fill="forwards"
                  from="false" to="true" target="#business-card"></a-animation>
      <a-animation begin="markerLost" attribute="visible" dur="1" fill="forwards"
                  to="false" target="#business-card"></a-animation>
    </a-nft>

    <!-- Камера с курсором для обработки кликов -->
    <a-entity camera position="0 0 0">
      <!-- Невидимый курсор (луч из центра экрана) для отслеживания наведений/кликов -->
      <a-cursor opacity="0"></a-cursor>
    </a-entity>
  </a-scene>

  <!-- Скрипт для обработки взаимодействий -->
  <script>
    // Получаем элементы визитки и ссылок по ID
    const businessCard = document.getElementById('business-card');
    const link1 = document.getElementById('link1');
    const link2 = document.getElementById('link2');
    // События AR.js: при обнаружении маркера плавно показываем визитку (через анимацию), при потере скрываем
    const marker = document.querySelector('a-nft');
    marker.addEventListener('markerFound', () => {
      console.log('Marker found - показываем визитку');
      // (Анимации A-Frame с атрибутами begin="markerFound" выполнят масштабирование и показ)
    });
    marker.addEventListener('markerLost', () => {
      console.log('Marker lost - скрываем визитку');
      // (Анимация с begin="markerLost" скроет визитку)
    });
    // Назначаем действия по клику на элементы ссылок
    // Пример: открыть профиль в новой вкладке (замените URL на свои ссылки)
    link1.addEventListener('click', () => {
      window.open('https://www.linkedin.com/in/ivan-ivanov', '_blank');
    });
    link2.addEventListener('click', () => {
      window.open('https://twitter.com/ivanivanov', '_blank');
    });
  </script>
</body>
</html>

